/*
âœ…ë¬¸ì œ ì œëª©: ë¯¸ë¡œíƒìƒ‰

âœ…ë¬¸ì œ ìœ í˜•: DFS

âœ…ë¬¸ì œ í’€ì´ ë‚ ì§œ: 2024-09-07

ðŸ’¡ë¬¸ì œ ë¶„ì„ ìš”ì•½
  - 7*7 ê²©ìžíŒ ë¯¸ë¡œë¥¼ íƒˆì¶œí•˜ëŠ” ê²½ë¡œì˜ ê°€ì§€ìˆ˜ë¥¼ ì¶œë ¥í•œë‹¤.
  - ì¶œë°œì ì€ (1, 1) ì¢Œí‘œ, ë„ì°©ì ì€ (7, 7) ì¢Œí‘œ.
  - ê²©ìžíŒì˜ 1ì€ ë²½, 0ì€ í†µë¡œ.
  - ìƒí•˜ì¢Œìš°ë¡œë§Œ ì›€ì§ì¸ë‹¤.

ðŸ’¡ì•Œê³ ë¦¬ì¦˜ ì„¤ê³„
  - ê²©ìžíŒì˜ ê° ì¢Œí‘œë¥¼ ë…¸ë“œë¡œ ê³„ì‚°í•´ë³´ìž.
  - 7*7 ì´ë¯€ë¡œ ì´ 49ê°œì˜ ë…¸ë“œë¡œ ë¶„ë¦¬. 1ë²ˆ ë…¸ë“œëŠ” ì¶œë°œì , 49ë²ˆ ë…¸ë“œëŠ” ë„ì°©ì 
  - ì¸ì ‘í–‰ë ¬ ë°©ì‹ìœ¼ë¡œ í’€ì–´ë³´ìž.
  - ìžì‹ ì´ ë°©ë¬¸í•  ìˆ˜ ìžˆëŠ” ë…¸ë“œëŠ” ìƒ: -7, í•˜: +7, ì¢Œ: -1, ìš°: +1ì´ë‹¤. ì—¬ê¸°ì„œ í•´ë‹¹ ì¸ë±ìŠ¤ì˜ ê°’ì´ 1(ë²½)ì´ë¼ë©´ ë°©ë¬¸ ë¶ˆê°€ëŠ¥.
  - ë°©ë¬¸í•œ ë…¸ë“œë¥¼ ì €ìž¥í•  ch ì´ ë…¸ë“œì˜ ìˆ˜ + 1ë§Œí¼ì˜ ê¸¸ì´ì˜ ë°°ì—´ì„ ì„ ì–¸í•˜ê³  0ìœ¼ë¡œ ì´ˆê¸°í™”í•œë‹¤.
  - ì¤‘ì²© ë°˜ë³µë¬¸ì„ ëŒë©´ì„œ ê° ë…¸ë“œê°€ ë°©ë¬¸í•  ìˆ˜ ìžˆëŠ” ë…¸ë“œì— 1ì„ í• ë‹¹í•œë‹¤.
  - ìž¬ê·€í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ í˜„ìž¬ ë…¸ë“œë¥¼ ë°›ìœ¼ë©° ì´ ë…¸ë“œì˜ ìˆ˜ë§Œí¼ ë°˜ë³µë¬¸ì„ ëŒë©´ì„œ ìž¬ê·€ íƒìƒ‰í•œë‹¤.
*/

function solution(board) {
  let answer = 0;

  const len = board.length;
  const nodeCnt = len * len;

  const graph = Array.from({ length: nodeCnt + 1 }, () =>
    Array(nodeCnt + 1).fill(0)
  );
  const ch = Array.from({ length: nodeCnt + 1 }, () => 0);

  for (let i = 0; i < len; i++) {
    for (let j = 0; j < len; j++) {
      const node = len * i + j + 1;
      const top = board[i - 1]?.[j] ?? 1;
      const bottom = board[i + 1]?.[j] ?? 1;
      const left = board[i][j - 1] ?? 1;
      const right = board[i][j + 1] ?? 1;

      if (!top) {
        graph[node][node - len] = 1;
      }

      if (!bottom) {
        graph[node][node + len] = 1;
      }

      if (!left) {
        graph[node][node - 1] = 1;
      }

      if (!right) {
        graph[node][node + 1] = 1;
      }
    }
  }

  function DFS(v) {
    if (v === nodeCnt) {
      answer++;
      return;
    }

    for (let i = 1; i <= nodeCnt; i++) {
      if (!graph[v][i] || ch[i]) {
        continue;
      }

      ch[i] = 1;
      DFS(i);
      ch[i] = 0;
    }
  }

  ch[1] = 1;
  DFS(1);

  return answer;
}

let arr = [
  [0, 0, 0, 0, 0, 0, 0],
  [0, 1, 1, 1, 1, 1, 0],
  [0, 0, 0, 1, 0, 0, 0],
  [1, 1, 0, 1, 0, 1, 1],
  [1, 1, 0, 0, 0, 0, 1],
  [1, 1, 0, 1, 1, 0, 0],
  [1, 0, 0, 0, 0, 0, 0],
];

console.log(solution(arr)); // 8

/*
âœ…ë¬¸ì œ ì œëª©: ë¯¸ë¡œíƒìƒ‰

âœ…ë¬¸ì œ ìœ í˜•: DFS

âœ…ë¬¸ì œ í’€ì´ ë‚ ì§œ: 2024-09-07

ðŸ’¡ë¬¸ì œ ë¶„ì„ ìš”ì•½
  - 7*7 ê²©ìžíŒ ë¯¸ë¡œë¥¼ íƒˆì¶œí•˜ëŠ” ê²½ë¡œì˜ ê°€ì§€ìˆ˜ë¥¼ ì¶œë ¥í•œë‹¤.
  - ì¶œë°œì ì€ (1, 1) ì¢Œí‘œ, ë„ì°©ì ì€ (7, 7) ì¢Œí‘œ.
  - ê²©ìžíŒì˜ 1ì€ ë²½, 0ì€ í†µë¡œ.
  - ìƒí•˜ì¢Œìš°ë¡œë§Œ ì›€ì§ì¸ë‹¤.

ðŸ’¡ì•Œê³ ë¦¬ì¦˜ ì„¤ê³„
  - â­ dx, dy í’€ì´
  - ìƒ, í•˜, ì¢Œ, ìš°ë¡œ ì´ë™í•  ìˆ˜ ìžˆëŠ” dx, dy ë°°ì—´ì„ ì„ ì–¸í•œë‹¤.
  - x ì¢Œí‘œì™€ y ì¢Œí‘œë¥¼ ë°›ëŠ” ìž¬ê·€í•¨ìˆ˜ë¥¼ ì„ ì–¸í•œë‹¤.
  - boardì˜ 0, 0(ì¶œë°œì )ì€ ë°©ë¬¸í•œ í‘œì‹œë¡œ 1ì„ í• ë‹¹í•œë‹¤.
  - ì²« ìž¬ê·€í•¨ìˆ˜ì˜ í˜¸ì¶œì—ì„œ 0, 0(ì¶œë°œì )ì„ ì¸ìˆ˜ë¡œ ì „ë‹¬í•œë‹¤.
  - ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ x, y ì¢Œí‘œê°€ 6, 6ì— ë„ë‹¬í•˜ë©´ answerë¥¼ 1 ë”í•˜ê³  í•¨ìˆ˜ë¥¼ ì¢…ë£Œí•œë‹¤.
  - dxì˜ ê¸¸ì´ë§Œí¼ ë°˜ë³µë¬¸ ëŒë©´ì„œ ë‹¤ìŒ ì¢Œí‘œë¥¼ ê³„ì‚°í•´ ë°©ë¬¸ì²˜ë¦¬í•˜ê³  ìž¬ê·€í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
  - ìž¬ê·€í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ë°©ë¬¸ì²˜ë¦¬ë¥¼ ë‹¤ì‹œ ì œê±°í•œë‹¤.
*/

function solution2(board) {
  let answer = 0;

  const len = board.length;
  const dx = [0, 1, 0, -1];
  const dy = [1, 0, -1, 0];

  function DFS(x, y) {
    if (x === len - 1 && y === len - 1) {
      answer++;
      return;
    }

    for (let i = 0; i < dx.length; i++) {
      const _x = x + dx[i];
      const _y = y + dy[i];

      if (_x < 0 || _x >= len || _y < 0 || _y >= len || board[_x][_y] !== 0) {
        continue;
      }

      board[_x][_y] = 1;
      DFS(_x, _y);
      board[_x][_y] = 0;
    }
  }

  board[0][0] = 1;
  DFS(0, 0);

  return answer;
}

console.log(solution2(arr)); // 8
