/*
âœ…ë¬¸ì œ ì œëª©: ê²½ë¡œíƒìƒ‰(DFS)

âœ…ë¬¸ì œ ìœ í˜•: DFS

âœ…ë¬¸ì œ í’€ì´ ë‚ ì§œ: 2024-09-07

ğŸ’¡ë¬¸ì œ ë¶„ì„ ìš”ì•½
  - ë°©í–¥ê·¸ë˜í”„ê°€ ì£¼ì–´ì§€ë©´ 1ë²ˆ ì •ì ì—ì„œ Në²ˆ ì •ì ìœ¼ë¡œ ê°€ëŠ” ëª¨ë“  ê²½ë¡œì˜ ê°€ì§€ ìˆ˜ë¥¼ ì¶œë ¥í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì„¸ìš”.
  - ì •ì ì˜ ìˆ˜ N(1<=N<=20), ê°„ì„ ì˜ ìˆ˜ M

ğŸ’¡ì•Œê³ ë¦¬ì¦˜ ì„¤ê³„
  - ì¸ì ‘í–‰ë ¬ ê·¸ë˜í”„ë¥¼ ì •ì  + 1 ë§Œí¼ì˜ í¬ê¸°ë¡œ ì´ì¤‘ë°°ì—´ì„ ë§Œë“ ë‹¤. ì´ì¤‘ë°°ì—´ì˜ ê°’ì€ 0ìœ¼ë¡œ ì´ˆê¸°í™”í•œë‹¤.
  - ë°©ë¬¸í•œ ë…¸ë“œë¥¼ ì €ì¥í•  ch ë°°ì—´ì„ ì„ ì–¸í•˜ê³  0ìœ¼ë¡œ ì´ˆê¸°í™”í•œë‹¤.
  - arrì„ ë°˜ë³µë¬¸ ëŒë©´ì„œ ê·¸ë˜í”„ì˜ ê°’ì„ 1ë¡œ í• ë‹¹í•œë‹¤.
  - ì¬ê·€ í•¨ìˆ˜ë¡œ ì¶œë°œ ë…¸ë“œì™€, ë„ì°© ë…¸ë“œë¥¼ ë°›ëŠ”ë‹¤.
  - ë„ì°© ë…¸ë“œê°€ nì— ë„ë‹¬í•˜ë©´ answerë¥¼ 1 ë”í•˜ê³  í•¨ìˆ˜ë¥¼ ì¢…ë£Œí•œë‹¤.
  - 1ë¶€í„° në§Œí¼ì˜ ë°˜ë³µë¬¸ì„ ëŒë©´ì„œ í˜„ì¬ ì¶œë°œ ë…¸ë“œê°€ ê°ˆ ìˆ˜ ì—†ëŠ” ìš”ì†Œì˜ ê²½ìš° continueí•œë‹¤.
  - ì´ë¯¸ ë°©ë¬¸í•œ ìš”ì†Œì˜ ê²½ìš°ì—ë„ continueí•œë‹¤.
  - ê·¸ ì™¸ì—ëŠ” ë°©ë¬¸ ì²˜ë¦¬í•˜ê³  DFS(ì¶œë°œ ë…¸ë“œ + 1, ë„ì°© ë…¸ë“œ)ë¡œ ì¬ê·€ íƒìƒ‰í•œë‹¤.
  - ì¬ê·€ íƒìƒ‰ì´ ëë‚˜ë©´ ë°©ë¬¸ ì²˜ë¦¬ë¥¼ 0ìœ¼ë¡œ ë³€ê²½í•œë‹¤.
*/

function solution(n, arr) {
  let answer = 0;

  const graph = Array.from({ length: n + 1 }, () => new Array(n + 1).fill(0));
  const ch = Array.from({ length: n + 1 }, () => 0);

  for (const [start, end] of arr) {
    graph[start][end] = 1;
  }

  function DFS(L, end) {
    if (end === n) {
      answer++;
      return;
    }

    for (let i = 1; i <= n; i++) {
      if (!graph[L][i] || ch[i]) {
        continue;
      }

      ch[i] = 1;
      DFS(L + 1, i);
      ch[i] = 0;
    }
  }

  DFS(1, 0);

  return answer;
}

let arr = [
  [1, 2],
  [1, 3],
  [1, 4],
  [2, 1],
  [2, 3],
  [2, 5],
  [3, 4],
  [4, 2],
  [4, 5],
];
console.log(solution(5, arr)); // 6

/*
âœ…ë¬¸ì œ ì œëª©: ê²½ë¡œíƒìƒ‰(DFS)

âœ…ë¬¸ì œ ìœ í˜•: DFS

âœ…ë¬¸ì œ í’€ì´ ë‚ ì§œ: 2024-09-07

ğŸ’¡ë¬¸ì œ ë¶„ì„ ìš”ì•½
  - ë°©í–¥ê·¸ë˜í”„ê°€ ì£¼ì–´ì§€ë©´ 1ë²ˆ ì •ì ì—ì„œ Në²ˆ ì •ì ìœ¼ë¡œ ê°€ëŠ” ëª¨ë“  ê²½ë¡œì˜ ê°€ì§€ ìˆ˜ë¥¼ ì¶œë ¥í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì„¸ìš”.
  - ì •ì ì˜ ìˆ˜ N(1<=N<=20), ê°„ì„ ì˜ ìˆ˜ M

ğŸ’¡ì•Œê³ ë¦¬ì¦˜ ì„¤ê³„
  - ë…¸ë“œëŠ” v, ê°„ì„ ì€ eë¡œ í‘œí˜„í•œë‹¤.
  - ê° ë…¸ë“œê°€ ë°©ë¬¸í•  ìˆ˜ ìˆëŠ” ë…¸ë“œë¥¼ ì €ì¥í•  ì´ì°¨ì› ë°°ì—´ graphë¥¼ ì„ ì–¸í•˜ê³  0ìœ¼ë¡œ ì´ˆê¸°í™”í•œë‹¤.
  - ë…¸ë“œì˜ ë°©ë¬¸ ì—¬ë¶€ë¥¼ ì €ì¥í•  ch ë°°ì—´ì„ ì„ ì–¸í•˜ê³  0ìœ¼ë¡œ ì´ˆê¸°í™”í•œë‹¤.
  - arrì„ ë°˜ë³µë¬¸ ëŒë©´ì„œ graphì— ë°©ë¬¸ ì—¬ë¶€ë¥¼ 1ë¡œ í• ë‹¹í•œë‹¤.
  - ì¬ê·€í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ í˜„ì¬ ë…¸ë“œë¥¼ ë‚˜íƒ€ë‚´ëŠ” vë¥¼ ë°›ëŠ”ë‹¤.
  - ì²« ì¬ê·€í•¨ìˆ˜ í˜¸ì¶œí•  ë•Œ ì¸ìˆ˜ë¡œ 1ì„ ë„˜ê²¨ì£¼ë©° ch[1]ì„ ì²´í¬í•œë‹¤.
  - vê°€ nì— ë„ë‹¬í•˜ë©´ answerë¥¼ 1 ë”í•˜ê³  í•¨ìˆ˜ë¥¼ ì¢…ë£Œí•œë‹¤.
  - 1ë¶€í„° në§Œí¼ ë°˜ë³µë¬¸ì„ ëŒë©´ì„œ ë…¸ë“œë¥¼ íƒìƒ‰í•œë‹¤.
  - graphë¥¼ í†µí•´ì„œ í˜„ì¬ ë…¸ë“œê°€ ë°©ë¬¸í•  ìˆ˜ ì—†ëŠ” ë…¸ë“œë©´ continueí•œë‹¤.
  - chë¥¼ í†µí•´ì„œ ì´ë¯¸ ë°©ë¬¸í•œ ë…¸ë“œì˜ ê²½ìš° continueí•œë‹¤.
*/

function solution2(n, arr) {
  let answer = 0;

  const graph = Array.from({ length: n + 1 }, () => Array(n + 1).fill(0));
  const ch = Array.from({ length: n + 1 }, () => 0);

  for (const [s, e] of arr) {
    graph[s][e] = 1;
  }

  function DFS(v) {
    if (v === n) {
      answer++;
      return;
    }

    for (let i = 1; i <= n; i++) {
      if (!graph[v][i] || ch[i]) {
        continue;
      }

      ch[i] = 1;
      DFS(i);
      ch[i] = 0;
    }
  }

  ch[1] = 1;
  DFS(1);

  return answer;
}

console.log(solution2(5, arr)); // 6
