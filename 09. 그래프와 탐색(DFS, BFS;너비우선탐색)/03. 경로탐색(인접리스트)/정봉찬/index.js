/*
β…λ¬Έμ  μ λ©: κ²½λ΅νƒμƒ‰(μΈμ ‘λ¦¬μ¤νΈ)

β…λ¬Έμ  μ ν•: DFS

β…λ¬Έμ  ν’€μ΄ λ‚ μ§: 2024-09-07

π’΅λ¬Έμ  λ¶„μ„ μ”μ•½
  - λ°©ν–¥κ·Έλν”„κ°€ μ£Όμ–΄μ§€λ©΄ 1λ² μ •μ μ—μ„ Nλ² μ •μ μΌλ΅ κ°€λ” λ¨λ“  κ²½λ΅μ κ°€μ§€ μλ¥Ό μ¶λ ¥ν•λΌ.
  - μ •μ μ μ N(1<=N<=20), κ°„μ„ μ μ M

π’΅μ•κ³ λ¦¬μ¦ μ„¤κ³„
  - κ° λ…Έλ“κ°€ λ°©λ¬Έν•  μ μλ” λ…Έλ“ λ¦¬μ¤νΈλ¥Ό μ €μ¥ν•  graph λ°°μ—΄μ„ μ„ μ–Έν•λ‹¤. λ‚΄λ¶€λ” λΉ λ°°μ—΄λ΅ λ§λ“ λ‹¤.
  - λ…Έλ“μ λ°©λ¬Έ μ—¬λ¶€λ¥Ό μ²΄ν¬ν•  ch λ°°μ—΄μ„ μ„ μ–Έν•λ‹¤. κ° μ”μ†λ” 0μΌλ΅ μ΄κΈ°ν™”ν•λ‹¤.
  - arrλ¥Ό μνν•λ©° ν•΄λ‹Ή λ…Έλ“λ¥Ό μΈλ±μ¤ νƒμƒ‰μΌλ΅ λ°©λ¬Έ λ…Έλ“λ¥Ό pushν•λ‹¤.
  - μ¬κ·€ ν•¨μλ΅ ν„μ¬λ…Έλ“λ¥Ό μλ―Έν•λ” vλ¥Ό λ§¤κ°λ³€μλ΅ λ°›λ”λ‹¤.
  - vκ°€ nμ— λ„λ‹¬ν•λ©΄ answerλ¥Ό 1 λ”ν•κ³  ν•¨μλ¥Ό μΆ…λ£ν•λ‹¤.
  - graphμ—μ„ ν„μ¬λ…Έλ“κ°€ νƒμƒ‰ κ°€λ¥ν• λ…Έλ“ λ¦¬μ¤νΈλ¥Ό λ½‘μ•„λ‚Έλ‹¤.
  - νƒμƒ‰ κ°€λ¥ν• λ…Έλ“ λ¦¬μ¤νΈλ΅ λ°λ³µλ¬Έμ„ λλ©΄μ„ νƒμƒ‰ν•λ‹¤.
*/

function solution(n, arr) {
  let answer = 0;

  const graph = Array.from({ length: n + 1 }, () => Array());
  const ch = Array.from({ length: n + 1 }, () => 0);

  for (const [s, e] of arr) {
    graph[s].push(e);
  }

  function DFS(v) {
    if (v === n) {
      answer++;
      return;
    }

    const destinations = graph[v];

    for (let i = 0; i < destinations.length; i++) {
      const destination = destinations[i];

      if (ch[destination]) {
        continue;
      }

      ch[destination] = 1;
      DFS(destination);
      ch[destination] = 0;
    }
  }

  ch[1] = 1;
  DFS(1);

  return answer;
}

let arr = [
  [1, 2],
  [1, 3],
  [1, 4],
  [2, 1],
  [2, 3],
  [2, 5],
  [3, 4],
  [4, 2],
  [4, 5],
];
console.log(solution(5, arr)); // 6
